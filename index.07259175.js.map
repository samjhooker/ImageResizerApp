{"mappings":"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","sources":["Desktop/resize app/index.js"],"sourcesContent":["const fileInput = document.querySelector(\"#upload\");\nconst colorPicker = document.querySelector(\"#color-picker\");\nconst widthInput = document.querySelector(\"#width-input\");\nconst heightInput = document.querySelector(\"#height-input\");\nconst bgImagePicker = document.querySelector(\"#imagebg-picker\");\nconst exportButton = document.querySelector(\"#export-button\");\nconst canvas = document.querySelector(\"#canvas\");\nconst context = canvas.getContext(\"2d\");\n\nlet imgToResize = null;\nlet canvasWidth = 700;\nlet canvasHeight = 300;\nlet backgroundColor = 'black';\nlet scale = 1.00;\nlet xOffset = 0;\nlet yOffset = 0;\nlet isDragging = false;\nlet mouseStartX, mouseStartY;\nlet canvasOffsetX, canvasOffsetY;\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    calcOffsetOfCanvas();\n    window.onscroll = function (e) { calcOffsetOfCanvas(); }\n    window.onresize = function (e) { calcOffsetOfCanvas(); }\n    canvas.onresize = function (e) { calcOffsetOfCanvas(); }\n\n    renderCanvas();\n    canvas.onmousedown = handleMouseDown;\n    canvas.onmousemove = handleMouseMove;\n    canvas.onmouseup = handleMouseUp;\n    canvas.onmouseout = handleMouseOut;\n    canvas.onmousewheel = handleScroll;\n});\n\ncolorPicker.addEventListener(\"change\", async (e) => {\n    backgroundColor = e.target.value;\n    renderCanvas();\n});\n\nbgImagePicker.addEventListener(\"change\", async (e) => {\n    renderCanvas();\n});\n\n\nheightInput.addEventListener(\"change\", async (e) => {\n    canvasHeight = e.target.value;\n    renderCanvas();\n});\n\nwidthInput.addEventListener(\"change\", async (e) => {\n    canvasWidth = e.target.value;\n    renderCanvas();\n});\n\nfunction calcOffsetOfCanvas() {\n    const canvasBounds = canvas.getBoundingClientRect();\n    canvasOffsetX = canvasBounds.left;\n    canvasOffsetY = canvasBounds.top;\n}\n\nfunction downloadImage() {\n    console.log('download image')\n    let canvasImage = canvas.toDataURL('image/jpeg');\n\n    let xhr = new XMLHttpRequest();\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        let a = document.createElement('a');\n        a.href = window.URL.createObjectURL(xhr.response);\n        a.download = 'ImageResizerDownload.jpg';\n        a.style.display = 'none';\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n    };\n    xhr.open('GET', canvasImage); \n    xhr.send();\n}\n\nfileInput.addEventListener(\"change\", async (e) => {\n    const [file] = fileInput.files;\n    imgToResize = document.querySelector(\"#imgToResize\");\n    imgToResize.src = await fileToDataUri(file);\n\n    imgToResize.addEventListener(\"load\", () => {\n        renderCanvas();\n    });\n\n    return false;\n});\n\nfunction fileToDataUri(field) {\n    return new Promise((resolve) => {\n        const reader = new FileReader();\n\n        reader.addEventListener(\"load\", () => {\n            resolve(reader.result);\n        });\n\n        reader.readAsDataURL(field);\n    });\n}\n\nfunction renderCanvas() {\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n\n    context.fillStyle = backgroundColor;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n\n    if (imgToResize) {\n        if (bgImagePicker.checked) {\n            //apply bg blur\n            let blurImage = new Image();\n            blurImage.src = imgToResize.src;\n            context.filter = 'blur(50px)';\n\n\n            context.drawImage(\n                blurImage,\n                -80,\n                -80,\n                canvas.width + 160,\n                canvas.height + 160\n            );\n        }\n\n        context.filter = 'blur(0px)';\n\n        const originalWidth = imgToResize.width;\n        const originalHeight = imgToResize.height;\n\n        const aspectRatio = originalWidth / originalHeight;\n        const width = canvasWidth;\n        const height = width / aspectRatio;\n\n        context.drawImage(\n            imgToResize,\n            xOffset,\n            yOffset,\n            width * scale,\n            height * scale\n        );\n    }\n}\n\n\nfunction handleMouseDown(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    mouseStartX = parseInt(e.clientX - canvasOffsetX);\n    mouseStartY = parseInt(e.clientY - canvasOffsetY);\n\n    isDragging = true;\n}\n\nfunction handleMouseUp(e) {\n    if (!isDragging) { return; }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    isDragging = false;\n}\n\nfunction handleMouseOut(e) {\n    if (!isDragging) { return; }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    isDragging = false;\n}\n\nfunction handleMouseMove(e) {\n    if (!isDragging) { return; }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    let mouseX = parseInt(e.clientX - canvasOffsetX);\n    let mouseY = parseInt(e.clientY - canvasOffsetY);\n\n    const dx = mouseX - mouseStartX;\n    const dy = mouseY - mouseStartY;\n\n    xOffset += dx;\n    yOffset += dy;\n    \n    renderCanvas();\n\n    mouseStartX = mouseX;\n    mouseStartY = mouseY;\n}\n\nfunction handleScroll(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (e.deltaY > 0) {\n        scale += 0.01;\n    } else {\n        scale -= 0.01;\n    }\n    renderCanvas();\n}\n\ndocument.addEventListener(\"keydown\", function (e) {\n    switch (e.key) {\n        case \"ArrowLeft\":\n            xOffset -= 3;\n            break;\n        case \"ArrowRight\":\n            xOffset += 3;\n            break;\n        case \"ArrowUp\":\n            yOffset -= 3;\n            break;\n        case \"ArrowDown\":\n            yOffset += 3;\n            break;\n        case \"=\":\n            scale += 0.01;\n            break;\n        case \"-\":\n            scale -= 0.01;\n            break;\n    }\n    renderCanvas();\n})\n\n"],"names":[],"version":3,"file":"index.07259175.js.map","sourceRoot":"/__parcel_source_root/"}
{"mappings":"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","sources":["Desktop/resize app/index.js"],"sourcesContent":["// hiding the div that will contain the images\n\nconst fileInput = document.querySelector(\"#upload\");\nconst colorPicker = document.querySelector(\"#color-picker\");\nconst widthInput = document.querySelector(\"#width-input\");\nconst heightInput = document.querySelector(\"#height-input\");\nconst exportButton = document.querySelector(\"#export-button\");\nconst canvas = document.querySelector(\"#canvas\");\nconst context = canvas.getContext(\"2d\");\n\nlet imgToResize = null;\n\ncanvasWidth = 700;\ncanvasHeight = 300;\n\nbackgroundColor = 'black';\n\nscale = 1.00;\nxOffset = 0;\nyOffset = 0;\n\n// drag related vars\nvar isDragging=false;\nvar mouseStartX,mouseStartY;\n\nvar isImageLoaded = false;\n\nvar canvasOffsetX,canvasOffsetY;\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    calcOffsetOfCanvas();\n    window.onscroll=function(e){ calcOffsetOfCanvas(); }\n    window.onresize=function(e){ calcOffsetOfCanvas(); }\n    canvas.onresize=function(e){ calcOffsetOfCanvas(); }\n        \n    renderCanvas();\n    canvas.onmousedown=handleMouseDown;\n    canvas.onmousemove=handleMouseMove;\n    canvas.onmouseup=handleMouseUp;\n    canvas.onmouseout=handleMouseOut;\n    canvas.onmousewheel=handleScroll;\n});\n\ncolorPicker.addEventListener(\"change\", async (e) => {\n    backgroundColor = e.target.value;\n    renderCanvas();\n});\n\nheightInput.addEventListener(\"change\", async (e) => {\n    canvasHeight = e.target.value;\n    renderCanvas();\n});\n\nwidthInput.addEventListener(\"change\", async (e) => {\n    canvasWidth = e.target.value;\n    renderCanvas();\n});\n\nfunction calcOffsetOfCanvas(){\n    var canvasBounds = canvas.getBoundingClientRect();\n    canvasOffsetX = canvasBounds.left;\n    canvasOffsetY = canvasBounds.top;        \n}\n\nfunction downloadImage() {\n    console.log('download image')\n  let canvasImage = canvas.toDataURL('image/jpeg');\n    \n    // this can be used to download any image from webpage to local disk\n    let xhr = new XMLHttpRequest();\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        let a = document.createElement('a');\n        a.href = window.URL.createObjectURL(xhr.response);\n        a.download = 'ImageResizerDownload.jpg';\n        a.style.display = 'none';\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n      };\n      xhr.open('GET', canvasImage); // This is to download the canvas Image\n      xhr.send();\n}\n\nfileInput.addEventListener(\"change\", async (e) => {\n    const [file] = fileInput.files;\n    imgToResize = document.querySelector(\"#imgToResize\");\n    imgToResize.src = await fileToDataUri(file);\n\n    imgToResize.addEventListener(\"load\", () => {\n        renderCanvas();\n    });\n\n    return false;\n});\n\nfunction fileToDataUri(field) {\n    return new Promise((resolve) => {\n        const reader = new FileReader();\n\n        reader.addEventListener(\"load\", () => {\n            resolve(reader.result);\n        });\n\n        reader.readAsDataURL(field);\n    });\n}\n\nfunction renderCanvas() {\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n\n    context.fillStyle = backgroundColor;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n\n    if (imgToResize) {\n\n\n        //bg blur\n\n        let blurImage = new Image();\n        blurImage.src = imgToResize.src;\n        context.filter = 'blur(50px)';\n\n\n        context.drawImage(\n            blurImage,\n            -80,\n            -80,\n            canvas.width + 160, \n            canvas.height + 160\n        );\n\n\n\n        context.filter = 'blur(0px)' ;\n\n        const originalWidth = imgToResize.width;\n        const originalHeight = imgToResize.height;\n    \n        const aspectRatio = originalWidth / originalHeight;\n        const width = canvasWidth;\n        const height = width / aspectRatio;\n\n        context.drawImage(\n            imgToResize,\n            xOffset,\n            yOffset,\n            width * scale, \n            height * scale\n        );\n    }\n}\n\n\nfunction handleMouseDown(e){\n    // tell the browser we're handling this event\n    e.preventDefault();\n    e.stopPropagation();\n    // calculate the current mouse position\n    mouseStartX=parseInt(e.clientX-canvasOffsetX);\n    mouseStartY=parseInt(e.clientY-canvasOffsetY);\n    // test mouse position against all shapes\n    // post result if mouse is in a shape\n    isDragging=true;\n}\n\nfunction handleMouseUp(e){\n    // return if we're not dragging\n    if(!isDragging){return;}\n    // tell the browser we're handling this event\n    e.preventDefault();\n    e.stopPropagation();\n    // the drag is over -- clear the isDragging flag\n    isDragging=false;\n}\n\nfunction handleMouseOut(e){\n    // return if we're not dragging\n    if(!isDragging){return;}\n    // tell the browser we're handling this event\n    e.preventDefault();\n    e.stopPropagation();\n    // the drag is over -- clear the isDragging flag\n    isDragging=false;\n}\n\nfunction handleMouseMove(e){\n    // return if we're not dragging\n    if(!isDragging){return;}\n    // tell the browser we're handling this event\n    e.preventDefault();\n    e.stopPropagation();\n    // calculate the current mouse position         \n    let mouseX=parseInt(e.clientX-canvasOffsetX);\n    let mouseY=parseInt(e.clientY-canvasOffsetY);\n    // how far has the mouse dragged from its previous mousemove position?\n    var dx=mouseX-mouseStartX;\n    var dy=mouseY-mouseStartY;\n    // move the selected shape by the drag distance\n    xOffset += dx;\n    yOffset += dy;\n    // clear the canvas and redraw all shapes\n    renderCanvas();\n    // update the starting drag position (== the current mouse position)\n    mouseStartX=mouseX;\n    mouseStartY=mouseY;\n}\n\nfunction handleScroll(e){\n    e.preventDefault();\n    e.stopPropagation();\n\n    if(e.deltaY > 0){\n        scale += 0.01;\n    } else {\n        scale -= 0.01;\n    }\n    renderCanvas();\n}\n\ndocument.addEventListener(\"keydown\", function (e) {\n    switch (e.key) {\n        case \"ArrowLeft\":\n            xOffset -= 3;\n            break;\n        case \"ArrowRight\":\n            xOffset += 3;\n            break;\n        case \"ArrowUp\":\n            yOffset -= 3;\n            break;\n        case \"ArrowDown\":\n            yOffset += 3;\n            break;\n        case \"=\":\n            scale += 0.01;\n            break;\n        case \"-\":\n            scale -= 0.01;\n            break;\n    }\n    renderCanvas();\n})\n\n"],"names":["fileInput","document","querySelector","colorPicker","widthInput","heightInput","exportButton","canvas","context","getContext","imgToResize","canvasWidth","canvasHeight","backgroundColor","scale","xOffset","yOffset","mouseStartX","mouseStartY","canvasOffsetX","canvasOffsetY","isDragging","isImageLoaded","calcOffsetOfCanvas","canvasBounds","getBoundingClientRect","left","top","downloadImage","console","log","canvasImage","toDataURL","xhr","XMLHttpRequest","responseType","onload","a","createElement","href","window","URL","createObjectURL","response","download","style","display","body","appendChild","click","remove","open","send","fileToDataUri","field","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","renderCanvas","width","height","fillStyle","fillRect","blurImage","Image","src","filter","drawImage","originalWidth","originalHeight","handleMouseDown","e","preventDefault","stopPropagation","parseInt","clientX","clientY","handleMouseUp","handleMouseOut","handleMouseMove","mouseX","mouseY","handleScroll","deltaY","onscroll","onresize","onmousedown","onmousemove","onmouseup","onmouseout","onmousewheel","async","target","value","file","files","key"],"version":3,"file":"index.fcebd533.js.map"}
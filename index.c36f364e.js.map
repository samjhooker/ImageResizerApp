{"mappings":"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","sources":["index.js"],"sourcesContent":["const fileInput = document.querySelector(\"#upload\");\nconst colorPicker = document.querySelector(\"#color-picker\");\nconst widthInput = document.querySelector(\"#width-input\");\nconst heightInput = document.querySelector(\"#height-input\");\nconst bgImagePicker = document.querySelector(\"#imagebg-picker\");\nconst exportButton = document.querySelector(\"#export-button\");\nconst canvas = document.querySelector(\"#canvas\");\nconst context = canvas.getContext(\"2d\");\n\nlet imgToResize = null;\nlet canvasWidth = 896;\nlet canvasHeight = 506;\nlet backgroundColor = 'black';\nlet scale = 1.00;\nlet xOffset = 0;\nlet yOffset = 0;\nlet isDragging = false;\nlet mouseStartX, mouseStartY;\nlet canvasOffsetX, canvasOffsetY;\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    calcOffsetOfCanvas();\n    window.onscroll = function (e) { calcOffsetOfCanvas(); }\n    window.onresize = function (e) { calcOffsetOfCanvas(); }\n    canvas.onresize = function (e) { calcOffsetOfCanvas(); }\n\n    renderCanvas();\n    canvas.onmousedown = handleMouseDown;\n    canvas.onmousemove = handleMouseMove;\n    canvas.onmouseup = handleMouseUp;\n    canvas.onmouseout = handleMouseOut;\n    canvas.onmousewheel = handleScroll;\n});\n\ncolorPicker.addEventListener(\"change\", async (e) => {\n    backgroundColor = e.target.value;\n    renderCanvas();\n});\n\nbgImagePicker.addEventListener(\"change\", async (e) => {\n    renderCanvas();\n});\n\n\nheightInput.addEventListener(\"change\", async (e) => {\n    canvasHeight = e.target.value;\n    renderCanvas();\n});\n\nwidthInput.addEventListener(\"change\", async (e) => {\n    canvasWidth = e.target.value;\n    renderCanvas();\n});\n\nfunction calcOffsetOfCanvas() {\n    const canvasBounds = canvas.getBoundingClientRect();\n    canvasOffsetX = canvasBounds.left;\n    canvasOffsetY = canvasBounds.top;\n}\n\nfunction downloadImage() {\n    console.log('download image')\n    let canvasImage = canvas.toDataURL('image/jpeg');\n\n    let xhr = new XMLHttpRequest();\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        let a = document.createElement('a');\n        a.href = window.URL.createObjectURL(xhr.response);\n        a.download = 'ImageResizerDownload.jpg';\n        a.style.display = 'none';\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n    };\n    xhr.open('GET', canvasImage); \n    xhr.send();\n}\n\nfileInput.addEventListener(\"change\", async (e) => {\n    const [file] = fileInput.files;\n    imgToResize = document.querySelector(\"#imgToResize\");\n    imgToResize.src = await fileToDataUri(file);\n\n    imgToResize.addEventListener(\"load\", () => {\n        renderCanvas();\n    });\n\n    return false;\n});\n\nfunction fileToDataUri(field) {\n    return new Promise((resolve) => {\n        const reader = new FileReader();\n\n        reader.addEventListener(\"load\", () => {\n            resolve(reader.result);\n        });\n\n        reader.readAsDataURL(field);\n    });\n}\n\nfunction renderCanvas() {\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n\n    context.fillStyle = backgroundColor;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n\n    if (imgToResize) {\n        if (bgImagePicker.checked) {\n            //apply bg blur\n            let blurImage = new Image();\n            blurImage.src = imgToResize.src;\n            context.filter = 'blur(50px)';\n\n\n            context.drawImage(\n                blurImage,\n                -80,\n                -80,\n                canvas.width + 160,\n                canvas.height + 160\n            );\n        }\n\n        context.filter = 'blur(0px)';\n\n        const originalWidth = imgToResize.width;\n        const originalHeight = imgToResize.height;\n\n        const aspectRatio = originalWidth / originalHeight;\n        const width = canvasWidth;\n        const height = width / aspectRatio;\n\n        context.drawImage(\n            imgToResize,\n            xOffset,\n            yOffset,\n            width * scale,\n            height * scale\n        );\n    }\n}\n\n\nfunction handleMouseDown(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    mouseStartX = parseInt(e.clientX - canvasOffsetX);\n    mouseStartY = parseInt(e.clientY - canvasOffsetY);\n\n    isDragging = true;\n}\n\nfunction handleMouseUp(e) {\n    if (!isDragging) { return; }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    isDragging = false;\n}\n\nfunction handleMouseOut(e) {\n    if (!isDragging) { return; }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    isDragging = false;\n}\n\nfunction handleMouseMove(e) {\n    if (!isDragging) { return; }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    let mouseX = parseInt(e.clientX - canvasOffsetX);\n    let mouseY = parseInt(e.clientY - canvasOffsetY);\n\n    const dx = mouseX - mouseStartX;\n    const dy = mouseY - mouseStartY;\n\n    xOffset += dx;\n    yOffset += dy;\n    \n    renderCanvas();\n\n    mouseStartX = mouseX;\n    mouseStartY = mouseY;\n}\n\nfunction handleScroll(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (e.deltaY > 0) {\n        scale += 0.01;\n    } else {\n        scale -= 0.01;\n    }\n    renderCanvas();\n}\n\ndocument.addEventListener(\"keydown\", function (e) {\n    switch (e.key) {\n        case \"ArrowLeft\":\n            xOffset -= 3;\n            break;\n        case \"ArrowRight\":\n            xOffset += 3;\n            break;\n        case \"ArrowUp\":\n            yOffset -= 3;\n            break;\n        case \"ArrowDown\":\n            yOffset += 3;\n            break;\n        case \"=\":\n            scale += 0.01;\n            break;\n        case \"-\":\n            scale -= 0.01;\n            break;\n    }\n    renderCanvas();\n})\n\n"],"names":[],"version":3,"file":"index.c36f364e.js.map","sourceRoot":"/__parcel_source_root/"}
const fileInput=document.querySelector("#upload"),colorPicker=document.querySelector("#color-picker"),widthInput=document.querySelector("#width-input"),heightInput=document.querySelector("#height-input"),bgImagePicker=document.querySelector("#imagebg-picker"),exportButton=document.querySelector("#export-button"),canvas=document.querySelector("#canvas"),context=canvas.getContext("2d");let mouseStartX,mouseStartY,canvasOffsetX,canvasOffsetY,imgToResize=null,canvasWidth=700,canvasHeight=300,backgroundColor="black",scale=1,xOffset=0,yOffset=0,isDragging=!1;function calcOffsetOfCanvas(){const e=canvas.getBoundingClientRect();canvasOffsetX=e.left,canvasOffsetY=e.top}function downloadImage(){console.log("download image");let e=canvas.toDataURL("image/jpeg"),n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){let e=document.createElement("a");e.href=window.URL.createObjectURL(n.response),e.download="ImageResizerDownload.jpg",e.style.display="none",document.body.appendChild(e),e.click(),e.remove()},n.open("GET",e),n.send()}function fileToDataUri(e){return new Promise((n=>{const a=new FileReader;a.addEventListener("load",(()=>{n(a.result)})),a.readAsDataURL(e)}))}function renderCanvas(){if(canvas.width=canvasWidth,canvas.height=canvasHeight,context.fillStyle=backgroundColor,context.fillRect(0,0,canvas.width,canvas.height),imgToResize){if(bgImagePicker.checked){let e=new Image;e.src=imgToResize.src,context.filter="blur(50px)",context.drawImage(e,-80,-80,canvas.width+160,canvas.height+160)}context.filter="blur(0px)";const e=imgToResize.width,n=imgToResize.height,a=canvasWidth,t=a/(e/n);context.drawImage(imgToResize,xOffset,yOffset,a*scale,t*scale)}}function handleMouseDown(e){e.preventDefault(),e.stopPropagation(),mouseStartX=parseInt(e.clientX-canvasOffsetX),mouseStartY=parseInt(e.clientY-canvasOffsetY),isDragging=!0}function handleMouseUp(e){isDragging&&(e.preventDefault(),e.stopPropagation(),isDragging=!1)}function handleMouseOut(e){isDragging&&(e.preventDefault(),e.stopPropagation(),isDragging=!1)}function handleMouseMove(e){if(!isDragging)return;e.preventDefault(),e.stopPropagation();let n=parseInt(e.clientX-canvasOffsetX),a=parseInt(e.clientY-canvasOffsetY);xOffset+=n-mouseStartX,yOffset+=a-mouseStartY,renderCanvas(),mouseStartX=n,mouseStartY=a}function handleScroll(e){e.preventDefault(),e.stopPropagation(),e.deltaY>0?scale+=.01:scale-=.01,renderCanvas()}document.addEventListener("DOMContentLoaded",(function(){calcOffsetOfCanvas(),window.onscroll=function(e){calcOffsetOfCanvas()},window.onresize=function(e){calcOffsetOfCanvas()},canvas.onresize=function(e){calcOffsetOfCanvas()},renderCanvas(),canvas.onmousedown=handleMouseDown,canvas.onmousemove=handleMouseMove,canvas.onmouseup=handleMouseUp,canvas.onmouseout=handleMouseOut,canvas.onmousewheel=handleScroll})),colorPicker.addEventListener("change",(async e=>{backgroundColor=e.target.value,renderCanvas()})),bgImagePicker.addEventListener("change",(async e=>{renderCanvas()})),heightInput.addEventListener("change",(async e=>{canvasHeight=e.target.value,renderCanvas()})),widthInput.addEventListener("change",(async e=>{canvasWidth=e.target.value,renderCanvas()})),fileInput.addEventListener("change",(async e=>{const[n]=fileInput.files;return imgToResize=document.querySelector("#imgToResize"),imgToResize.src=await fileToDataUri(n),imgToResize.addEventListener("load",(()=>{renderCanvas()})),!1})),document.addEventListener("keydown",(function(e){switch(e.key){case"ArrowLeft":xOffset-=3;break;case"ArrowRight":xOffset+=3;break;case"ArrowUp":yOffset-=3;break;case"ArrowDown":yOffset+=3;break;case"=":scale+=.01;break;case"-":scale-=.01}renderCanvas()}));
//# sourceMappingURL=index.d7214c73.js.map
